<!DOCTYPE html>
<html>
<head>
<meta http-equiv="X-UA-Compatible" content="IE=Edge"/>
<link rel="stylesheet" type="text/css" href="../mainstyle.css" >
<title>Windows</title>
<script>


function addUnloadHandler() {
    window.onbeforeunload = function(e) {
        return "OnBeforeUnload"
    }
}

function testAlert(timeout) {
    if (timeout == 0) {
        alert("Test!");
    }
    else {
        setTimeout(function(){ alert("Test!"); }, timeout);
    }
}

function testPrompt(timeout) {
    if (timeout == 0) {
        prompt("This is a prompt!");
    }
    else {
        setTimeout(function(){ alert("This is a timeout prompt!!"); }, timeout);
    }
}

var windowOpenSequenceNumber = 0;
function testNumberedWindowOpen() {
    window.open("http://tonyschr-server", "tsopen" + windowOpenSequenceNumber++);
}

function windowOpenAndClose() {
    var win = window.open('http://tonyschr-server/windows/openanother.html', 'ts', 'menubar=no,location=no,resizable=no,scrollbars=no,status=no');
    win.close();
}

function getRandom(max) {
    return Math.floor((Math.random() * max));
}

var popupWindowNames = [ "tsMany1", "tsMany2", "tsMany3", "tsMany4", "tsMany5" ];
var popupWindows = [];
var locations = [ "http://tonyschr-server/", "http://tonyschr-server/", "http://tonyschr-server/", "http://tonyschr-server/windows/openanother.html" ];
var features = [ "", "menubar=no,location=no,resizable=no,scrollbars=no,status=no'"];

function closeRandomPopup(timeout) {
    if (popupWindows.length > 0)
    {
        var index = getRandom(popupWindows.length);
        var win = popupWindows[index];
        win.close();
        popupWindows.splice(index, 1);
    }
    
    setTimeout(function() { closeRandomPopup(); }, getRandom(timeout));
}

function openRandomPopupType(timeout) {
    var win = window.open(locations[getRandom(locations.length)], popupWindowNames[getRandom(popupWindowNames.length)], features[getRandom(features.length)]);
    popupWindows.push(win);
    setTimeout(function() { openRandomPopupType(); }, getRandom(timeout))
}

function windowOpenAndCloseMany() {
    setTimeout(function() { openRandomPopupType(2000); }, getRandom(2000))
        
    setTimeout(function() { closeRandomPopup(3000); }, getRandom(3000));
}

</script>
</head>
<body>

<h2>window targeting</h2>
<a href="http://tonyschr-server" target="ts">hlink window targeting: http://tonyschr-server in "ts"</a> | 
<a href="http://tonyschr-server" target="tsopen">hlink window targeting: http://tonyschr-server in "tsopen"</a><br><br>
<button onclick="window.open('http://tonyschr-server', 'ts');">window.open targeting: http://tonyschr-server in "ts"</button> | 
<button onclick="window.open('http://tonyschr-server', 'tsopen');">window.open targeting: http://tonyschr-server in "tsopen"</button><br>
<button onclick="testNumberedWindowOpen();">window.open targeting tsopenN</button>

<h2>frame targeting</h2>
<a href="http://tonyschr-server/windows/iframes1.html" target="ftt">Frame Targeting Tests</a><br><br>
<a href="http://tonyschr-server" target="iframe1">hlink window targeting: http://tonyschr-server in "iframe1"</a> | 
<button onclick="window.open('http://tonyschr-server', 'iframe2');">window.open targeting: http://tonyschr-server in "iframe2"</button> | 

<h3>Frame types</h3>
<button onclick="window.open('http://tonyschr-server', 'test', 'menubar=no,location=no,resizable=no,scrollbars=no,status=no');">window.open minimal chrome</button>
<button onclick="window.open('https://www.fidelity.com', 'test', 'menubar=no,location=no,resizable=no,scrollbars=no,status=no');">Fidelity window.open minimal chrome</button>

<h2>Basic dialogs</h2>
<button onclick="testAlert(0);">Alert</button> | <button onclick="testAlert(4000);">Alert 4 Sec Delay</button>
<button onclick="testPrompt(0);">Prompt</button> | <button onclick="testPrompt(4000);">Prompt 4 Sec Delay</button>

<h2>Misc</h2>
<a href="sets_stress.html">Tab Sets Stress</a><br>
<button onclick="windowOpenAndClose()">Open and close</button><br>

<h2>Unload</h2>
<button onclick="addUnloadHandler();">Add OnBeforeUnload Handler</button>

</body>
</html>
